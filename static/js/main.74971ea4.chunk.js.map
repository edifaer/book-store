{"version":3,"sources":["components/spinner/spinner.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","reducers/book-list-reducer.js","reducers/shopping-cart-refactor.js","reducers/index.js","store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/hoc/with-suspense.js","components/app/app.js","components/error-boundry/error-boundry.js","index.js","services/bookstore-service.js"],"names":["Spinner","className","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","updateBookList","state","action","undefined","books","loading","error","type","payload","bookList","updateCartItems","cartItems","item","idx","count","slice","updateOrder","bookId","quantity","shoppingCart","orderTotal","orderCount","book","find","id","itemIndex","findIndex","newItem","title","total","Math","round","price","updateCartItem","newTotal","updateShoppingCart","reducer","store","createStore","ShopHeader","numItems","to","withSuspense","Component","props","Suspense","fallback","CartPage","lazy","HomePage","connect","role","path","render","exact","ErrorBoundry","hasError","errorInfo","this","setState","children","bookstoreService","data","author","coverImage","Promise","resolve","setTimeout","ReactDOM","value","document","getElementById"],"mappings":"2GAAA,0BAuBeA,IAnBC,WACZ,OACI,yBAAKC,UAAU,6CACX,yBAAKA,UAAU,oBACX,8BACA,8BACA,6BACI,+BAEJ,6BACI,mC,gCCdpB,0BAWeC,IARQ,WACnB,OACI,yBAAKD,UAAU,mBAAf,W,wHCAJE,EAAMC,gBAFIC,E,EAAVC,SACUC,E,EAAVC,U,2NCiCWC,EArCQ,SAACC,EAAOC,GAE7B,QAAcC,IAAVF,EACF,MAAO,CACLG,MAAO,GACPC,SAAS,EACTC,MAAO,MAIX,OAAQJ,EAAOK,MACb,IAAK,sBACH,MAAO,CACLH,MAAO,GACPC,SAAS,EACTC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLF,MAAOF,EAAOM,QACdH,SAAS,EACTC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLF,MAAO,GACPC,SAAS,EACTC,MAAOJ,EAAOM,SAGlB,QACE,OAAOP,EAAMQ,W,OCjCbC,EAAkB,SAACC,EAAWC,EAAMC,GAEtC,OAAmB,IAAfD,EAAKE,MACC,GAAN,mBACOH,EAAUI,MAAM,EAAGF,IAD1B,YAEOF,EAAUI,MAAMF,EAAM,MAIpB,IAATA,EACM,GAAN,mBACOF,GADP,CAEIC,IAIF,GAAN,mBACOD,EAAUI,MAAM,EAAGF,IAD1B,CAEID,GAFJ,YAGOD,EAAUI,MAAMF,EAAM,MAqB3BG,EAAc,SAACf,EAAOgB,EAAQC,GAAc,IAC5Bd,EAA6DH,EAAxEQ,SAAWL,MAD2B,EACkCH,EAArDkB,aAAeR,EADI,EACJA,UAAWS,EADP,EACOA,WAAYC,EADnB,EACmBA,WAE1DC,EAAOlB,EAAMmB,MAAK,qBAAEC,KAAeP,KACnCQ,EAAYd,EAAUe,WAAU,qBAAEF,KAAeP,KAGjDU,EAxBa,SAACL,GAA+B,IAAzBV,EAAwB,uDAAjB,GAAIM,EAAa,yCAO9CN,EAJAY,UAH8C,MAGzCF,EAAKE,GAHoC,IAO9CZ,EAHAE,aAJ8C,MAItC,EAJsC,IAO9CF,EAFAgB,aAL8C,MAKtCN,EAAKM,MALiC,IAO9ChB,EADAiB,aAN8C,MAMtC,EANsC,EASlD,MAAO,CACHL,KACAI,QACAd,MAAOA,EAAQI,EACfW,MAAOC,KAAKC,MAAwC,KAAjCF,EAAQX,EAAWI,EAAKU,QAAgB,KAW/CC,CAAeX,EAFlBX,EAAUc,GAEoBP,GACrCgB,EAAWhB,EAAW,EAAIE,EAAaE,EAAKU,MAAQZ,EAAcE,EAAKU,MAAQd,EAErF,MAAO,CACHE,WAAYU,KAAKC,MAAiB,IAAXG,GAAkB,IACzCb,WAAYA,EAAaH,EACzBP,UAAWD,EAAgBC,EAAWgB,EAASF,KA8BxCU,EA1BY,SAAClC,EAAOC,GAE/B,QAAcC,IAAVF,EACA,MAAO,CACHU,UAAW,GACXS,WAAY,EACZC,WAAY,GAIpB,OAAQnB,EAAOK,MACX,IAAK,qBACD,OAAOS,EAAYf,EAAOC,EAAOM,QAAS,GAE9C,IAAK,yBACD,OAAOQ,EAAYf,EAAOC,EAAOM,SAAU,GAE/C,IAAK,8BACD,IAAMI,EAAOX,EAAMkB,aAAaR,UAAUY,MAAK,qBAAEC,KAAetB,EAAOM,WACvE,OAAOQ,EAAYf,EAAOC,EAAOM,SAAUI,EAAKE,OAEpD,QACI,OAAOb,EAAMkB,eCrEViB,EAPC,SAACnC,EAAOC,GACtB,MAAO,CACLO,SAAUT,EAAeC,EAAOC,GAChCiB,aAAcgB,EAAmBlC,EAAOC,K,QCD7BmC,EAFDC,YAAYF,G,eCDXG,G,MCEI,SAAC,GAAgB,IAAfC,EAAc,EAAdA,SACjB,OACI,4BAAQhD,UAAU,mBACd,kBAAC,IAAD,CAAMA,UAAU,iBAAiBiD,GAAG,KAApC,WACA,kBAAC,IAAD,CAAMjD,UAAU,gBAAgBiD,GAAG,SAC/B,uBAAGjD,UAAU,kCADjB,SAEU,0BAAMA,UAAU,oBAAoBgD,GAF9C,Q,QCKGE,EAVM,SAACC,GAClB,OAAO,SAACC,GACJ,OACI,kBAAC,IAAMC,SAAP,CAAgBC,SAAU,kBAAC,IAAD,OACtB,kBAACH,EAAcC,MCAzBG,EAAWrD,IAAMsD,MAAK,kBAAM,gCAC5BC,EAAWvD,IAAMsD,MAAK,kBAAM,gCAsBnBE,eANS,SAAC,GACrB,MAAO,CACH7B,WAFmD,EAAjCF,aAAgBE,cAM3B6B,EAnBH,SAACN,GAAW,IACZvB,EAAcuB,EAAdvB,WACR,OACI,0BAAM8B,KAAK,OAAO3D,UAAU,aACxB,kBAAC,EAAD,CAAYgD,SAAUnB,IACtB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO+B,KAAK,IAAIC,OAAQX,EAAaO,GAAWK,OAAK,IACrD,kBAAC,IAAD,CAAOF,KAAK,QAAQC,OAAQX,EAAaK,U,wCCfpCQ,E,4MACjBtD,MAAQ,CACJuD,UAAU,G,gEAGIlD,EAAOmD,GACrBC,KAAKC,SAAS,CACVH,UAAS,M,+BAKb,OAAGE,KAAKzD,MAAMuD,SACH,kBAAC,IAAD,MAEJE,KAAKd,MAAMgB,a,GAfgBlE,IAAMiD,WCS1CkB,EAAmB,I,iDCXrBC,KAAO,CACH,CACItC,GAAI,EACJI,MAAO,iCACPmC,OAAQ,kBACR/B,MAAO,GACPgC,WAAY,4FAEhB,CACIxC,GAAI,EACJI,MAAO,cACPmC,OAAQ,oBACR/B,MAAO,GACPgC,WAAY,4FAEhB,CACIxC,GAAI,EACJI,MAAO,mBACPmC,OAAQ,eACR/B,MAAO,GACPgC,WAAY,4FAEhB,CACIxC,GAAI,EACJI,MAAO,iCACPmC,OAAQ,aACR/B,MAAO,IACPgC,WAAY,6F,uDAIR,IAAD,OACP,OAAO,IAAIC,SAAQ,SAACC,GAChBC,YAAW,WACPD,EAAQ,EAAKJ,QACd,Y,MDtBfM,IAASf,OACL,kBAAC,IAAD,CAAUhB,MAAOA,GACb,kBAAC,EAAD,KACI,kBAAC,IAAD,CAA0BgC,MAAOR,GAC7B,kBAAC,IAAD,KACI,kBAAC,EAAD,UAKhBS,SAASC,eAAe,W","file":"static/js/main.74971ea4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n    return (\r\n        <div className=\"loadingio-spinner-double-ring-wae50y9m20c\">\r\n            <div className=\"ldio-w1owd7ldnro\">\r\n                <div></div>\r\n                <div></div>\r\n                <div>\r\n                    <div></div>\r\n                </div>\r\n                <div>\r\n                    <div></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n    return (\r\n        <div className=\"error-indicator\">\r\n            Error\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n}","const updateBookList = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ];\r\n    }\r\n\r\n    if (idx === -1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ];\r\n    }\r\n\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1)\r\n    ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n    const {\r\n        id = book.id,\r\n        count = 0,\r\n        title = book.title,\r\n        total = 0\r\n    } = item;\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: Math.round((total + quantity * book.price) * 100) / 100\r\n    };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const {bookList: {books}, shoppingCart: {cartItems, orderTotal, orderCount}} = state;\r\n\r\n    const book = books.find(({id}) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    const newTotal = quantity > 0 ? orderTotal + book.price : orderTotal + (book.price * quantity);\r\n\r\n    return {\r\n        orderTotal: Math.round(newTotal * 100) / 100,\r\n        orderCount: orderCount + quantity,\r\n        cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotal: 0,\r\n            orderCount: 0\r\n        }\r\n    }\r\n\r\n    switch (action.type) {\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1);\r\n\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n            return updateOrder(state, action.payload, -item.count);\r\n\r\n        default:\r\n            return state.shoppingCart;\r\n    }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './book-list-reducer';\r\nimport updateShoppingCart from './shopping-cart-refactor';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import reducer from \"./reducers\";\r\nimport {createStore} from \"redux\";\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport './shop-header.css';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst ShopHeader = ({numItems}) => {\r\n    return (\r\n        <header className=\"shop-header row\">\r\n            <Link className=\"logo text-dark\" to='/'>ReStore</Link>\r\n            <Link className=\"shopping-cart\" to='/cart'>\r\n                <i className=\"cart-icon fa fa-shopping-cart\"/>\r\n                Cart (<span className=\"cart-items-count\">{numItems}</span>)\r\n            </Link>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default ShopHeader;\r\n","import React from \"react\";\r\nimport Spinner from \"../spinner/spinner\";\r\n\r\nconst withSuspense = (Component) => {\r\n    return (props) => {\r\n        return (\r\n            <React.Suspense fallback={<Spinner/>}>\r\n                <Component {...props}/>\r\n            </React.Suspense>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withSuspense;","import React from \"react\";\r\nimport './app.css'\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport ShopHeader from \"../shop-header\";\r\nimport {connect} from \"react-redux\";\r\nimport withSuspense from \"../hoc/with-suspense\";\r\n\r\nconst CartPage = React.lazy(() => import('../pages/cart-page'));\r\nconst HomePage = React.lazy(() => import('../pages/home-page'));\r\n\r\n\r\nconst App = (props) => {\r\n    const { orderCount} = props;\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            <ShopHeader numItems={orderCount}/>\r\n            <Switch>\r\n                <Route path='/' render={withSuspense(HomePage)} exact/>\r\n                <Route path='/cart' render={withSuspense(CartPage)}/>\r\n            </Switch>\r\n        </main>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({shoppingCart: { orderCount}}) => {\r\n    return {\r\n        orderCount\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);","import React from \"react\";\r\nimport ErrorIndicator from \"../error-indicator/error-indicator\";\r\n\r\nexport default class ErrorBoundry extends React.Component{\r\n    state = {\r\n        hasError: false\r\n    };\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState({\r\n            hasError:true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if(this.state.hasError) {\r\n            return <ErrorIndicator/>\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\nimport App from \"./components/app/app\";\nimport ErrorBoundry from \"./components/error-boundry/error-boundry\";\nimport BookstoreService from \"./services/bookstore-service\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <BookstoreServiceProvider value={bookstoreService}>\n                <Router>\n                    <App />\n                </Router>\n            </BookstoreServiceProvider>\n        </ErrorBoundry>\n    </Provider>,\n    document.getElementById('root')\n);","export default class BookstoreService {\r\n    data = [\r\n        {\r\n            id: 1,\r\n            title: 'Production-Ready Microservices',\r\n            author: 'Susan J. Fowler',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Release It!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 3,\r\n            title: 'Nineteen Minutes',\r\n            author: 'Jodi Picoult',\r\n            price: 11,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51FFa23AzrL._SX322_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 4,\r\n            title: 'The Boy in the Striped Pajamas',\r\n            author: 'John Boyne',\r\n            price: 8.30,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/61OX4OteXZL._SX328_BO1,204,203,200_.jpg'\r\n        }\r\n    ];\r\n\r\n    getBooks() {\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve(this.data)\r\n            }, 700);\r\n        });\r\n    }\r\n}"],"sourceRoot":""}